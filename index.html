<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Notus Labs API PoC ‚Äì DX Research</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>Notus Labs API PoC ‚Äì Testes de Developer Experience</h1>
      <a href="https://docs.notus.team/docs/guides" target="_blank" style="color: orange;">=== DOCUMENTA√á√ÉO |||  </a>
      <a href="https://atlantic-uncle-84c.notion.site/Notus-Labs-DX-Research-2646c57a9e238006bb95dbd8a7aaf3a0" target="_blank" style="color: orange;">DX RESEARCH |||  </a>
      <a href="https://dashboard.notus.team/org/2815df2a-a07c-440d-9590-079e85583f8a" target="_blank" style="color: orange;">DASHBOARD ===</a>
      <label>
        <p style="color: white">API Key:</p>
        <input type="password" id="apiKey" placeholder="Insira sua API Key" />
      </label>
      <button onclick="saveApiKey()">Salvar</button>
    </header>

    <!-- Smart Wallets -->
    <section>
      <h2>üîπ Smart Wallets</h2>

      <!-- Problema #1, #7 -->
      <div class="test-card">
        <h3>GET /wallets/address (Problemas #1 e #7)</h3>
        <p><strong>‚ö†Ô∏è Problema:</strong> Ignora <code>address</code>; exige EOA + factory.</p>
        <p><strong>Resultado Esperado:</strong> Deveria retornar wallet espec√≠fica por <code>address</code>. Retorna sempre wallet com <code>salt=0</code>.</p>
        <label>address (Smart Wallet Address)</label>
        <input type="text" id="getAddress" placeholder="0x34378c28a87ac84266211aa9b1c77caca241a659" value="0x34378c28a87ac84266211aa9b1c77caca241a659" />
        <label>externallyOwnedAccount (EOA)</label>
        <input type="text" id="getEoa" placeholder="0x96832a27567538a804dfb8493513d7199ac63944" value="0x96832a27567538a804dfb8493513d7199ac63944" />
        <label>factory</label>
        <input type="text" id="getFactory" placeholder="0x0000000000400CdFef5E2714E63d8040b700BC24" value="0x0000000000400CdFef5E2714E63d8040b700BC24" readonly />
        <button onclick="testWalletGet()">Executar</button>
        <pre id="result-wallet-get"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 1.pdf', '_blank')">Di√°rio #1</button>
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 2.pdf', '_blank')">Di√°rio #2</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Problema #2, #3, #4 -->
      <div class="test-card">
        <h3>POST /wallets/register (Problemas #2, #3, #4)</h3>
        <p><strong>‚ö†Ô∏è Problemas:</strong> EOA inv√°lido ‚Üí "Invalid"; salt padr√£o = "0"; erro 403 sem API key.</p>
        <p><strong>Resultado Esperado:</strong> Erro claro com regex; documentar valor padr√£o de <code>salt</code>; usar 401 se chave ausente.</p>
        <label>externallyOwnedAccount (EOA)</label>
        <input type="text" id="eoaReg" placeholder="0x96832a27567538a804dfb8493513d7199ac63944" value="0x96832a27567538a804dfb8493513d7199ac63944" />
        <label>factory</label>
        <input type="text" id="factoryReg" placeholder="0x0000000000400CdFef5E2714E63d8040b700BC24" value="0x0000000000400CdFef5E2714E63d8040b700BC24" readonly />
        <label>salt (opcional ‚Äì padr√£o: "0")</label>
        <input type="text" id="saltReg" placeholder="0" />
        <button onclick="testWalletRegister()">Executar</button>
        <pre id="result-wallet-register"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 1.pdf', '_blank')">Di√°rio #1</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #9, #21 + Problema #5 -->
      <div class="test-card">
        <h3>GET /wallets/{address}/portfolio (Teste #9, #21 ‚Äì Problema #5)</h3>
        <p><strong>‚ö†Ô∏è Problema:</strong> Pode retornar `500` na 1¬™ chamada.</p>
        <p><strong>Resultado Esperado:</strong> Sempre 200 OK com arrays vazios se sem ativos. Nenhum dado off-chain (KYC/Fiat).</p>
        <label>address (Smart Wallet Address)</label>
        <input type="text" id="portfolioAddress" placeholder="0x34378c28a87ac84266211aa9b1c77caca241a659" value="0x34378c28a87ac84266211aa9b1c77caca241a659" />
        <button onclick="testPortfolio()">Executar</button>
        <pre id="result-portfolio"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 2.pdf', '_blank')">Di√°rio #2</button>
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 5.pdf', '_blank')">Di√°rio #5</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #10, #22 -->
      <div class="test-card">
        <h3>GET /wallets/{address}/history (Teste #10, #22)</h3>
        <p><strong>Resultado Esperado:</strong> Sempre 200 OK com <code>transactions: []</code> se sem transa√ß√µes on-chain. Nenhum evento KYC ou Fiat.</p>
        <label>address (Smart Wallet Address)</label>
        <input type="text" id="historyAddress" placeholder="0x34378c28a87ac84266211aa9b1c77caca241a659" value="0x34378c28a87ac84266211aa9b1c77caca241a659" />
        <button onclick="testHistory()">Executar</button>
        <pre id="result-history"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 2.pdf', '_blank')">Di√°rio #2</button>
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 5.pdf', '_blank')">Di√°rio #5</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #11 + Problema #6 -->
      <div class="test-card">
        <h3>POST /wallets/{address}/deposit (Teste #11 ‚Äì Problema #6)</h3>
        <p><strong>‚ö†Ô∏è Problema:</strong> Saldo insuficiente ‚Üí `500` (deveria ser `400`).</p>
        <p><strong>Resultado Esperado:</strong> 400 Bad Request com detalhes do saldo dispon√≠vel vs requerido.</p>
        <label>address (Smart Wallet Address)</label>
        <input type="text" id="depositAddress" placeholder="0x34378c28a87ac84266211aa9b1c77caca241a659" value="0x34378c28a87ac84266211aa9b1c77caca241a659" />
        <label>token (Endere√ßo do token ERC-20)</label>
        <input type="text" id="tokenAddr" placeholder="0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48" value="0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48" />
        <label>amount (em unidades m√≠nimas)</label>
        <input type="number" id="depositAmount" placeholder="1000000" value="1000000" />
        <label>chainId</label>
        <input type="number" id="chainIdDep" placeholder="1" value="1" />
        <label>fromAddress (EOA de origem)</label>
        <input type="text" id="fromAddr" placeholder="0x96832a27567538a804dfb8493513d7199ac63944" value="0x96832a27567538a804dfb8493513d7199ac63944" />
        <button onclick="testDeposit()">Executar</button>
        <pre id="result-deposit"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 2.pdf', '_blank')">Di√°rio #2</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #12 + Problema #8 -->
      <div class="test-card">
        <h3>PATCH /wallets/{address}/metadata (Teste #12)</h3>
        <p><strong>‚úÖ Aceita:</strong> objeto JSON.</p>
        <p><strong>Resultado Esperado:</strong> Atualiza√ß√£o bem-sucedida com response completo da wallet.</p>
        <label>address (Smart Wallet Address)</label>
        <input type="text" id="metaWalletAddr" placeholder="0x34378c28a87ac84266211aa9b1c77caca241a659" value="0x34378c28a87ac84266211aa9b1c77caca241a659" />
        <label>metadata (JSON object)</label>
        <textarea id="walletMeta" placeholder='{"name":"Minha Wallet","tag":"test"}'>{"name":"Minha Wallet","tag":"test"}</textarea>
        <button onclick="testUpdateWalletMetadata()">Executar</button>
        <pre id="result-wallet-meta"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 2.pdf', '_blank')">Di√°rio #2</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #13 + Problema #8 -->
      <div class="test-card">
        <h3>PATCH /wallets/transactions/{id}/metadata (Teste #13 ‚Äì Problema #8)</h3>
        <p><strong>‚ö†Ô∏è Aceita apenas:</strong> string (n√£o objeto).</p>
        <p><strong>Resultado Esperado:</strong> 400 Bad Request se enviar objeto; 404 se transa√ß√£o n√£o existir.</p>
        <label>transactionId</label>
        <input type="text" id="txIdMeta" placeholder="invalid-id" value="invalid-id" />
        <label>metadata (string)</label>
        <input type="text" id="txMeta" placeholder="Test transaction for DX research" value="Test transaction for DX research" />
        <button onclick="testUpdateTxMetadata()">Executar</button>
        <pre id="result-tx-meta"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 2.pdf', '_blank')">Di√°rio #2</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>
    </section>

    <!-- KYC -->
    <section>
      <h2>üîπ KYC</h2>

      <!-- Teste #14 + Problema #9 -->
      <div class="test-card">
        <h3>POST /kyc/.../standard (Teste #14 ‚Äì Problema #9)</h3>
        <p><strong>‚ö†Ô∏è Problema:</strong> Documenta√ß√£o diz que campos s√£o opcionais, mas s√£o obrigat√≥rios.</p>
        <p><strong>Resultado Esperado:</strong> 200 OK com sessionId e URLs S3. Todos os campos devem ser obrigat√≥rios ou documentados como tal.</p>
        <button onclick="testKycCreate()">Executar (com todos os campos)</button>
        <pre id="result-kyc-create"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 3.pdf', '_blank')">Di√°rio #3</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #18 -->
      <div class="test-card">
        <h3>POST /kyc/.../standard (Teste #18 ‚Äì Campos faltando)</h3>
        <p><strong>Resultado Esperado:</strong> 400 Bad Request com lista de todos campos faltantes.</p>
        <button onclick="testKycCreateMinimal()">Executar (sem campos obrigat√≥rios)</button>
        <pre id="result-kyc-create-minimal"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 3.pdf', '_blank')">Di√°rio #3</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #15, #17 -->
      <div class="test-card">
        <h3>GET /kyc/.../{sessionId} (Teste #15, #17)</h3>
        <p><strong>Resultado Esperado:</strong> Status inicial = <code>PENDING</code>; ap√≥s processar = <code>FAILED</code> (sem documentos).</p>
        <label>sessionId (UUID)</label>
        <input type="text" id="kycSessionId" placeholder="a7fd2ad4-12b4-4464-bbca-0fbbafd7ef98" value="a7fd2ad4-12b4-4464-bbca-0fbbafd7ef98" />
        <button onclick="testKycGet()">Executar</button>
        <pre id="result-kyc-get"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 3.pdf', '_blank')">Di√°rio #3</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #16 -->
      <div class="test-card">
        <h3>POST /kyc/.../{sessionId}/process (Teste #16)</h3>
        <p><strong>Observa√ß√£o:</strong> Retorna `204`, mas falha assincronamente se n√£o houver documentos.</p>
        <p><strong>Resultado Esperado:</strong> 204 No Content (aceita requisi√ß√£o); status posterior = <code>FAILED</code>.</p>
        <label>sessionId (UUID)</label>
        <input type="text" id="kycProcessId" placeholder="a7fd2ad4-12b4-4464-bbca-0fbbafd7ef98" value="a7fd2ad4-12b4-4464-bbca-0fbbafd7ef98" />
        <button onclick="testKycProcess()">Executar</button>
        <pre id="result-kyc-process"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 3.pdf', '_blank')">Di√°rio #3</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>

      <!-- Teste #19 -->
      <div class="test-card">
        <h3>GET /kyc/.../invalid-id (Teste #19)</h3>
        <p><strong>Resultado Esperado:</strong> 404 Not Found com mensagem clara.</p>
        <button onclick="testKycNotFound()">Executar</button>
        <pre id="result-kyc-notfound"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 3.pdf', '_blank')">Di√°rio #3</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>
    </section>

    <!-- Fiat -->
    <section>
      <h2>üîπ Fiat</h2>

      <!-- Teste #20 -->
      <div class="test-card">
        <h3>POST /fiat/deposit/quote (Teste #20)</h3>
        <p><strong>‚ö†Ô∏è Comportamento esperado:</strong> `403 Forbidden` se KYC n√£o aprovado ou sem habilita√ß√£o.</p>
        <p><strong>Resultado Esperado:</strong> 403 com mensagem clara sobre pr√©-requisitos (KYC aprovado + habilita√ß√£o).</p>
        <button onclick="testFiatQuote()">Executar</button>
        <pre id="result-fiat-quote"></pre>
        <div class="db-buttons">
          <button class="db-btn" onclick="window.open('documentos/Di√°rio de Bordo 4.pdf', '_blank')">Di√°rio #4</button>
          <button class="db-btn final" onclick="window.open('documentos/Relat√≥rio Final.pdf', '_blank')">Relat√≥rio Final</button>
        </div>
      </div>
    </section>
  </div>

  <script src="script.js"></script>
</body>
</html>